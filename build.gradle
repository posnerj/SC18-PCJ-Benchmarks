group 'Sc18-PCJ-Benchmarks'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'eclipse'

sourceCompatibility = 10
targetCompatibility = 10

subprojects {
    buildscript {
        repositories {
            mavenCentral()
        }
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile project(':pcj')
}

sourceSets {
    main {
        java {
            srcDirs = ["src"]
        }
    }
}

task copyToLib << {
    ['compile', 'runtime', 'testCompile'].each { mode ->
        copy {
            from configurations.getByName(mode).files
            into 'lib'
        }
    }
}

task copyToBin(type: Copy) {
    delete "bin"
    from "${buildDir}/classes/java/main"
    into "bin"
}

build.finalizedBy(copyToLib)
build.finalizedBy(copyToBin)
copyToLib.dependsOn(build)
copyToBin.dependsOn(build)
